{% extends "layout.html" %}

{% block title %}
Admin Dashboard
{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1>Admin Dashboard</h1>
    <div class="mb-3">
        <a href="/add_restaurant" class="btn btn-primary">Add New Restaurant</a>
        <a href="/add_category" class="btn btn-primary" style="margin-left: 10px;">Add New Category</a>
        <a href="/add_discount" class="btn btn-primary" style="margin-left: 10px;">Add New Discount</a>
        <a href="/restaurants" class="btn btn-secondary" style="margin-left: 10px;">View Map</a>
    </div>

    <!-- Categories Table -->
    <h2>Categories</h2>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Category Name</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for category in categories %}
            <tr>
                <th scope="row">{{ category[0] }}</th>
                <td>{{ category[1] }}</td>
                <td>
                    <form action="/delete_category/{{ category[0] }}" method="POST" style="display: inline;">
                        <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this category?');">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Restaurants Table -->
    <h2>Restaurants</h2>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Address</th>
                <th scope="col">Description</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for restaurant in restaurants %}
            <tr>
                <th scope="row">{{ restaurant[0] }}</th>
                <td>{{ restaurant[1] }}</td>
                <td>{{ restaurant[2] }}</td>
                <td>{{ restaurant[3] }}</td>
                <td>
                    <a href="/edit_restaurant/{{ restaurant[0] }}" class="btn btn-info">Edit</a>
                    <form action="/delete_restaurant/{{ restaurant[0] }}" method="POST" style="display: inline;">
                        <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this?');">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Discounts Table -->
    <h2>Discounts</h2>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Restaurant</th>
                <th scope="col">Description</th>
                <th scope="col">Start Date</th>
                <th scope="col">End Date</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for discount in discounts %}
            <tr>
                <th scope="row">{{ discount[0] }}</th>
                <td>{{ discount[1] }}</td>
                <td>{{ discount[2] }}</td>
                <td>{{ discount[3] }}</td>
                <td>{{ discount[4] }}</td>
                <td>
                    <form action="/delete_discount/{{ discount[0] }}" method="POST" style="display: inline;">
                        <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this discount?');">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>
{% endblock %}
